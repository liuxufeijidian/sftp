<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" id="viewport" name="viewport" />
		<meta content="telephone=no" name="format-detection" />
		<title>美宠师傅端</title>
		<link href="/modules/base/css/common.css" rel="stylesheet" type="text/css">
		<link href="/modules/pet-service-manage/css/pet-service-manage.css" rel="stylesheet" type="text/css">
		<link href="/components/sweetalert/sweetalert.css" rel="stylesheet" type="text/css">
		<link href="/components/sweetalert/swal-forms.css" rel="stylesheet" type="text/css">
	</head>
	<body class="padding-side border-box" style="padding-top:70px">
		<div class="container order-fill">
			<nav class="nav fixed-height fixed-top flex">
				<ul class="flex flex-grow">
					<li class="equal-width flex-grow items-center flex">
						<a th:href="@{/weixin/pagePetOrderAdmin(openId=${user.openId}, orderStatus=2)}" class="flex items-center justify-center flex-grow">
						<div class="flex-grow">
							已分配订单
						</div></a>
					</li>

					<li class="equal-width flex-grow flex">
						<a th:href="@{/weixin/pagePetOrderAdmin(openId=${user.openId}, orderStatus=3)}" class="flex items-center justify-center flex-grow ">
						<div class="flex-grow">
							已完成订单
						</div></a>
					</li>
				</ul>

			</nav>
			<div class="order-list">
				<div>
					总共<span class="order-total" th:text="${#arrays.length(bookedOrder)}">2</span>单
				</div>
				<div class="order-item" th:each="order : ${bookedOrder}">
					<div class="order border radius">
						<div class="radius book" th:if="${order.orderStatus} == 5">
							已接单
						</div>
						<div class="radius book" th:if="${order.orderStatus} == 8">
							待支付
						</div>
						<div class="radius book" th:if="${order.orderStatus} == 2">
							已支付
						</div>
						
						<div class="expert radius" th:if="${orderStatus} == 2 or ${orderStatus} == 3">
							服务师傅：<span th:text="${order.masterName}">张小小</span>
						</div>
						<div class="padding-side">
							<p>
								订单号：<span class="order-num" th:text="${order.orderNumber}">250042187</span>
							</p>
							<p th:inline="text">
								用户名：[[${order.userName}]]
							</p>
							<p th:inline="text">
								联系方式：[[${order.mobile}]]
							</p>
							<p th:inline="text">
								地址：[[${order.address}]]
							</p>
							<p th:inline="text">
								爱宠名字：[[${order.petName} == null ? '未填写' : ${order.petName}]]
							</p>
							<p th:inline="text">
								爱宠年龄：[[${order.petAge} == null ? '未填写' : ${order.petAge}]]
							</p>
							<p th:inline="text">
								爱宠品种：[[${order.petType} == null ? '未填写' : ${order.petType}]]
							</p>
							<p th:inline="text">
								是否具有攻击性：[[${order.isAttack} == 0 ? '否' : '是']]
							</p>
							<p th:inline="text">
								爱宠身体状况：[[${order.petCondition} == null ? '未填写' : ${order.petCondition}]]
							</p>
							<p th:inline="text">
								服务时间：[[${#calendars.format(order.time,'yyyy.MM.dd')}]]
							</p>
							<p th:inline="text">
								服务项目：[[${order.petItem} == null ? '待服务人员确认' : ${order.petItem}]]
							</p>
							<p th:inline="text">
								购买产品：无
							</p>
							<p th:inline="text">
								价格：[[${order.payPrice} == null ? '待服务人员确认' : ${order.payPrice}]]
							</p>
							<input type="hidden" class="orderId" th:value="${order.id}" />
						</div>
						<div class="flex" th:if="${orderStatus} == 2">
							<a href="cancelOrder" class="shadow bg fixed-height equal-width radius flex-grow flex items-center justify-center editOrder">编辑订单</a>
							<a th:href="@{/weixin/pagePetOrderService(petId=${order.petId})}" class="shadow bg fixed-height equal-width radius flex-grow flex items-center justify-center">服务记录</a>
						</div>
						<div class="flex" th:if="${orderStatus} == 3">
							<a href="#" class="shadow bg fixed-height equal-width radius flex-grow flex items-center justify-center payOrder">已收款</a>
							<a th:href="@{/weixin/pagePetOrderService(petId=${order.petId})}" class="shadow bg fixed-height equal-width radius flex-grow flex items-center justify-center">服务记录</a>
						</div>
					</div>
					<div class="fixed-height bg radius shadow flex items-center justify-center finish-order" th:if="${orderStatus} == 2">
						完成服务
					</div>
				</div>
			</div>
		</div>
		<input type="hidden" th:value="${orderStatus}" id="orderStatus"/>
		<script type="text/javascript" src="/lib/mod.js"></script>
		<!--SCRIPT_PLACEHOLDER-->

		<script type="text/javascript">
			require("/modules/pet-service-manage/js/dominated-assigned-order");
		</script>

	</body>
</html>
